<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../../partials/common/head'); %>
    <title>Login | Readr</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <style>
    body {
      height: 100vh;
      width: 100vw;
    }
  </style>
  <body class="d-flex align-items-center py-4">
    <form action="/auth/login" method="post" class="p-4 p-md-5 border rounded-3 bg-body-tertiary mx-auto mw-100" style="width: 520px">
      <a href="/" type="button" class="btn btn-secondary mb-3 rounded">
        <i class="fa-solid fa-chevron-left"></i>
      </a>

      <div class="text-center mb-4">
        <h2 class="fw-bold mb-1">Welcome Back</h2>
        <p class="text-muted">Sign in to continue to Readr</p>
      </div>

      <% if (error) { %>
      <div class="form-floating border border-danger rounded p-3 text-danger mb-3"><%= error %></div>
      <% } %> <% if (success) { %>
      <div class="form-floating border border-success rounded p-3 text-success mb-3"><%= success %></div>
      <% } %>

      <div class="form-floating mb-3">
        <input name="username" type="email" class="form-control" id="floatingInput" placeholder="name@example.com" />
        <label for="floatingInput">Email or Username</label>
        <small id="usercheck" style="color: red; display: none">Username is missing</small>
      </div>
      <div class="form-floating mb-3 position-relative">
        <input name="password" type="password" class="form-control" id="floatingPassword" placeholder="Password" />
        <label for="floatingPassword">Password</label>
        <i class="fa-regular fa-eye position-absolute top-50 end-0 translate-middle-y me-3" style="cursor: pointer" id="togglePassword"></i>
        <small id="passcheck" style="color: red; display: none"> Please fill the password </small>
      </div>
      <div class="d-flex justify-content-end">
        <a href="/auth/forgot-password" class="mb-3 text-decoration-none">Forgot password </a>
      </div>

      <button class="w-100 btn btn-lg btn-primary" type="submit">
        <div id="login-button-loader" style="display: none">
          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          <span class="sr-only">Loading...</span>
        </div>

        <span id="login-button-text"> Login</span>
      </button>
      <hr class="my-4" />
      <div class="text-body-secondary text-center">
        <small class="">Don't have an account <a href="/auth/register" class="mb-3 text-decoration-none">Sign-up </a> </small>
      </div>
    </form>
  </body>
  <script src="/assets/js/login.js"></script>
</html>
